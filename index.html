<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>직원(팀장) 메시지</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
        <script>
            Kakao.init('04b17b163c8c5855765076c465461ac1');
            console.log(Kakao.isInitialized());
        </script>
    </head>
    <body>
        <div class="d-flex" id="wrapper">
            <!-- Sidebar-->
            <div class="border-end bg-white" id="sidebar-wrapper">
                <div class="sidebar-heading border-bottom bg-light">메뉴</div>
                <div class="list-group list-group-flush">
                    <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!">공지사항</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3" href="https://naturem-message.github.io/leader/">직원(팀장)</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!">직원(진료팀)</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!">직원(데스크)</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!">내원환자</a>
                    <a class="list-group-item list-group-item-action list-group-item-light p-3" href="#!">수신거부(로그아웃)</a>
                </div>
            </div>
            <!-- Page content wrapper-->
            <div id="page-content-wrapper">
                <!-- Top navigation-->
                <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                    <div class="container-fluid">
                        <button class="btn btn-primary" id="sidebarToggle">메뉴 접기/펼치기</button>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                                <li class="nav-item active"><a class="nav-link" href="https://naturem-message.github.io/home/">처음화면</a></li>
                                <li class="nav-item"><a class="nav-link" href="http://naturem.co.kr/" target="_blank">내이처럼치과병원</a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <!-- Page content-->
                <div class="container-fluid">
                    <h1 class="mt-4">직원(팀장) 메시지</h1>
                    <p>&nbsp</p>
                    <p>팀장님들의 메시지 서비스 이용을 위한 로그인 페이지입니다.</p>
                    <p>매일 아침 8시, 전날의 매출통계를 카카오톡 메시지로 발송해 드립니다.</p>
                    <p>&nbsp;</p>
                    <a id="custom-login-btn" href="javascript:loginWithKakao()">
                      <img
                        src="//k.kakaocdn.net/14/dn/btroDszwNrM/I6efHub1SN5KCJqLm1Ovx1/o.jpg"
                        width="222"
                        alt="카카오 로그인 버튼"
                      />
                    </a>
                    <p id="token-result"></p>
                    <script type="text/javascript">
                      function loginWithKakao() {
                        Kakao.Auth.authorize({
                          redirectUri: 'https://naturem-message.github.io/leader/',
                          scope: "friends,talk_message"
                        });
                      }
                      // 아래는 데모를 위한 UI 코드입니다.
                      displayToken()
                      function displayToken() {
                        const token = getCookie('authorize-access-token')
                        if(token) {
                          Kakao.Auth.setAccessToken(token)
                          Kakao.Auth.getStatusInfo(({ status }) => {
                            if(status === 'connected') {
                              document.getElementById('token-result').innerText = 'login success. token: ' + Kakao.Auth.getAccessToken()
                            } else {
                              Kakao.Auth.setAccessToken(null)
                            }
                          })
                        }
                      }
                      function getCookie(name) {
                        const value = "; " + document.cookie;
                        const parts = value.split("; " + name + "=");
                        if (parts.length === 2) return parts.pop().split(";").shift();
                      }
                    </script>
                    <script type="text/javascript">
                    function sendPost(url, params) {
                        var form = document.createElement('form');
                        form.setAttribute('method', 'post');
                        form.setAttribute('action', https://kauth.kakao.com/oauth/token);
                        document.charset = "utf-8";
                        for ( var key in params) {
                            var hiddenField = document.createElement('input');
                            hiddenField.setAttribute('type', 'hidden');
                            hiddenField.setAttribute('name', key);
                            hiddenField.setAttribute('value', params[key]);
                            form.appendChild(hiddenField);
                        }
                        document.body.appendChild(form);
                        form.submit();
                    }
                    </script>
                    <a id="kakao-login-btn"></a>
                    <script type="text/javascript">
                        Kakao.Auth.createLoginButton({
                        container: '#kakao-login-btn',
                        success: function(authObj) {
                          Kakao.API.request({
                            url: '/v2/user/me',
                            success: function(res) {
                              alert(JSON.stringify(res))
                            },
                            fail: function(error) {
                              alert(
                                'login success, but failed to request user information: ' +
                                  JSON.stringify(error)
                              )
                            },
                          })
                        },
                        fail: function(err) {
                          alert('failed to login: ' + JSON.stringify(err))
                        },
                      })
                    </script>
                </div>
            </div>
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
